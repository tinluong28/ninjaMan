<html>
  <head>
    <title>NinjaMan</title>
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
      }
      .wall {
        background-color: blue;
        width: 40px;
        height: 40px;
        display: inline-block;
      }
      .blank {
        background-color: black;
        width: 40px;
        height: 40px;
        display: inline-block;
      }
      .sushi {
        background-color: black;
        width: 40px;
        height: 40px;
        display: inline-block;
        background-image: url("assets/sushi.png");
        background-size: contain;
      }
      .onigiri {
        background-color: black;
        width: 40px;
        height: 40px;
        display: inline-block;
        background-image: url("assets/onigiri.png");
        background-size: contain;
      }
      #ninja {
        background-color: black;
        width: 40px;
        height: 40px;
        position: absolute;
        background-image: url("assets/ninja.gif");
        background-size: contain;
        top: 40px;
        left: 40px;
      }
    </style>
  </head>
  <body>
    <div id="world"></div>
    <div id="ninja"></div>

    <script>
      // let world = [
      //   //create maze using array
      //   [1, 1, 1, 1, 1, 1, 1, 1, 1],
      //   [1, 0, 2, 1, 0, 0, 0, 1, 1],
      //   [1, 0, 1, 0, 0, 1, 0, 1, 1],
      //   [1, 0, 2, 1, 0, 1, 0, 0, 1],
      //   [1, 0, 1, 0, 0, 1, 1, 0, 1],
      //   [1, 0, 2, 1, 0, 1, 0, 0, 1],
      //   [1, 1, 2, 1, 0, 1, 1, 0, 1],
      //   [1, 2, 0, 0, 0, 0, 0, 0, 1],
      //   [1, 1, 1, 1, 1, 1, 1, 1, 1]
      // ];
      const arr = [0, 1, 2, 3];

      const randomWorld = (row, col) => {
        let world = [];
        for (let i = 0; i < row; i++) {
          world[i] = [];
          world[i][0] = 1;
          world[i][col] = 1;
          for (let j = 1; j < col; j++) {
            if (i === 0 || i == row - 1) {
              world[i][j] = 1;
            } else if (i == 1 && j == 1) {
              world[i][j] = 0;
            } else {
              world[i][j] = arr[Math.floor(Math.random() * arr.length)];
            }
          }
        }
        console.log(world);
        return world;
      };
      world = randomWorld(12, 9);
      let worldDict = {
        // assign desc
        0: "blank",
        1: "wall",
        2: "sushi",
        3: "onigiri"
      };

      const drawWorld = () => {
        output = "";
        for (let i = 0; i < world.length; i++) {
          //make rows
          output += "<div class = 'row'>";
          for (let x = 0; x < world[i].length; x++) {
            // each row a number of blocks
            output += "<div class ='" + worldDict[world[i][x]] + "'></div>";
          }
          output += "</div>"; //close the "row" div
        }

        document.getElementById("world").innerHTML = output;
      };
      drawWorld();

      let ninjaman = {
        x: 1,
        y: 1
      };

      let updateNinja = () => {
        document.getElementById("ninja").style.top = ninjaman.y * 40 + "px";
        document.getElementById("ninja").style.left = ninjaman.x * 40 + "px";
      };
      document.onkeydown = e => {
        if (e.keyCode === 37) {
          //LEFT
          if (world[ninjaman.y][ninjaman.x - 1] != 1) {
            ninjaman.x--;
          }
        } else if (e.keyCode === 39) {
          //RIGHT
          if (world[ninjaman.y][ninjaman.x + 1] != 1) {
            ninjaman.x++;
          }
        } else if (e.keyCode === 38) {
          //UP
          if (world[ninjaman.y - 1][ninjaman.x] != 1) {
            ninjaman.y--;
          }
        } else if (e.keyCode === 40) {
          //DOWN
          if (world[ninjaman.y + 1][ninjaman.x] != 1) {
            ninjaman.y++;
          }
        }
        world[ninjaman.y][ninjaman.x] = 0;
        updateNinja();
        drawWorld();
      };
    </script>
  </body>
</html>
